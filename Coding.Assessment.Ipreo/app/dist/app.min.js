!function(){"use strict";window.Ipreo={},window.Ipreo.getNamespace=function(e){for(var t,a=e.split("."),n=window,i=0;i<a.length;i++)void 0!==n[t=a[i]]&&null!==n[t]||(n[t]={}),n=n[t];return n}}(),function(e,t){"use strict";t.SubwayStopPageHandler=function(){var t={apiPrefix:"/api/subwaystops",getSubwayStops:"",calculateDistance:"/distance"},a={originTextBox:"#origin",destinationTextBox:"#destination",typeahead:".typeahead",button:"#calculate-button",message:"#message",form:"#form",responseTemplate:"#response-template"};function n(){var t=e(a.originTextBox).val(),n=e(a.destinationTextBox).val(),i=e(a.button);return t&&n?(i.prop("disabled",!1),!0):(i.prop("disabled","disabled"),!1)}function i(i){!function(){var i,o,r=e(a.originTextBox),s=e(a.destinationTextBox);n()&&(i=r.typeahead("getActive"),o=s.typeahead("getActive"),i.hasOwnProperty("id")&&o.hasOwnProperty("id")&&(e(a.message).text("loading..."),e.ajax({type:"POST",url:t.apiPrefix+t.calculateDistance,dataType:"json",data:JSON.stringify({originSubwayStopId:i.id,destinationSubwayStopId:o.id}),contentType:"application/json"}).done(function(t){var n=function(t){var n,i=e(a.responseTemplate).html();if(null!==t&&void 0!==t)for(n in t)t.hasOwnProperty(n)&&(i=i.replace("{{"+n+"}}",t[n]));return i}(t);e(a.message).html(n)}).fail(function(t,n){e(a.message).text("An error occurred requesting the information. Error: "+n)})))}(),i.preventDefault()}return this.init=function(){e(a.message).text("loading..."),e.get(t.apiPrefix+t.getSubwayStops,function(t){n=t,e(a.typeahead).typeahead({source:n,autoSelect:!0}).prop("disabled",!1);var n;e(a.message).text("")}),e(a.originTextBox+","+a.destinationTextBox).change(function(){e(a.message).text(""),n()}),e(a.form).on("submit",i)},this}}(window.jQuery,Ipreo.getNamespace("Ipreo.PageHandlers"));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInN1YndheVN0b3BQYWdlSGFuZGxlci5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJJcHJlbyIsImdldE5hbWVzcGFjZSIsIm5zIiwibmFtZXNwYWNlUGFydCIsIm5hbWVzcGFjZVBhcnRzIiwic3BsaXQiLCJuYW1lc3BhY2UiLCJpIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiJCIsIlN1YndheVN0b3BQYWdlSGFuZGxlciIsInVybHMiLCJhcGlQcmVmaXgiLCJnZXRTdWJ3YXlTdG9wcyIsImNhbGN1bGF0ZURpc3RhbmNlIiwic2VsZWN0b3JzIiwib3JpZ2luVGV4dEJveCIsImRlc3RpbmF0aW9uVGV4dEJveCIsInR5cGVhaGVhZCIsImJ1dHRvbiIsIm1lc3NhZ2UiLCJmb3JtIiwicmVzcG9uc2VUZW1wbGF0ZSIsInZhbGlkYXRlSW5wdXQiLCJvcmlnaW5WYWwiLCJ2YWwiLCJkZXN0aW5hdGlvblZhbCIsImNhbGN1bGF0ZUJ1dHRvbiIsInByb3AiLCJmb3JtU3VibWl0SGFuZGxlciIsImV2ZW50IiwiYWN0aXZlT3JpZ2luIiwiYWN0aXZlRGVzdGluYXRpb24iLCJvcmlnaW4iLCJkZXN0aW5hdGlvbiIsImhhc093blByb3BlcnR5IiwidGV4dCIsImFqYXgiLCJ0eXBlIiwidXJsIiwiZGF0YVR5cGUiLCJkYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsIm9yaWdpblN1YndheVN0b3BJZCIsImlkIiwiZGVzdGluYXRpb25TdWJ3YXlTdG9wSWQiLCJjb250ZW50VHlwZSIsImRvbmUiLCJ0ZW1wbGF0ZSIsIm1vZGVsIiwidGVtcGxhdGVWYWx1ZSIsImh0bWwiLCJyZXBsYWNlIiwiYXBwbHlNb2RlbFRvVGVtcGxhdGUiLCJmYWlsIiwieGhyIiwiZXJyb3IiLCJyZXF1ZXN0RGlzdGFuY2UiLCJwcmV2ZW50RGVmYXVsdCIsInRoaXMiLCJpbml0IiwiZ2V0Iiwic291cmNlIiwiYXV0b1NlbGVjdCIsImNoYW5nZSIsIm9uIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLGFBRUFBLE9BQUFDLFNBRUFELE9BQUFDLE1BQUFDLGFBQUEsU0FBQUMsR0FNQSxJQUxBLElBQ0FDLEVBREFDLEVBQUFGLEVBQUFHLE1BQUEsS0FFQUMsRUFBQVAsT0FDQVEsRUFBQSxFQUVBQSxFQUFBSCxFQUFBSSxPQUFBRCxTQUVBRSxJQUFBSCxFQURBSCxFQUFBQyxFQUFBRyxLQUNBLE9BQUFELEVBQUFILEtBQ0FHLEVBQUFILE9BR0FHLEVBQUFBLEVBQUFILEdBR0EsT0FBQUcsR0FwQkEsR0NBQSxTQUFBSSxFQUFBUixHQUNBLGFBRUFBLEVBQUFTLHNCQUFBLFdBQ0EsSUFDQUMsR0FDQUMsVUFBQSxtQkFDQUMsZUFBQSxHQUNBQyxrQkFBQSxhQUVBQyxHQUNBQyxjQUFBLFVBQ0FDLG1CQUFBLGVBQ0FDLFVBQUEsYUFDQUMsT0FBQSxvQkFDQUMsUUFBQSxXQUNBQyxLQUFBLFFBQ0FDLGlCQUFBLHNCQVVBLFNBQUFDLElBQ0EsSUFBQUMsRUFBQWYsRUFBQU0sRUFBQUMsZUFBQVMsTUFDQUMsRUFBQWpCLEVBQUFNLEVBQUFFLG9CQUFBUSxNQUNBRSxFQUFBbEIsRUFBQU0sRUFBQUksUUFFQSxPQUFBSyxHQUFBRSxHQUNBQyxFQUFBQyxLQUFBLFlBQUEsSUFDQSxJQUVBRCxFQUFBQyxLQUFBLFdBQUEsYUFDQSxHQW1CQSxTQUFBQyxFQUFBQyxJQUtBLFdBQ0EsSUFFQUMsRUFDQUMsRUFIQUMsRUFBQXhCLEVBQUFNLEVBQUFDLGVBQ0FrQixFQUFBekIsRUFBQU0sRUFBQUUsb0JBSUFNLE1BQ0FRLEVBQUFFLEVBQUFmLFVBQUEsYUFDQWMsRUFBQUUsRUFBQWhCLFVBQUEsYUFFQWEsRUFBQUksZUFBQSxPQUFBSCxFQUFBRyxlQUFBLFFBQ0ExQixFQUFBTSxFQUFBSyxTQUFBZ0IsS0FBQSxjQUNBM0IsRUFBQTRCLE1BQ0FDLEtBQUEsT0FDQUMsSUFBQTVCLEVBQUFDLFVBQUFELEVBQUFHLGtCQUNBMEIsU0FBQSxPQUNBQyxLQUFBQyxLQUFBQyxXQUNBQyxtQkFBQWIsRUFBQWMsR0FDQUMsd0JBQUFkLEVBQUFhLEtBRUFFLFlBQUEscUJBQ0FDLEtBQUEsU0FBQVAsR0FDQSxJQUFBUSxFQTFDQSxTQUFBQyxHQUNBLElBQUF0QixFQUNBdUIsRUFBQTFDLEVBQUFNLEVBQUFPLGtCQUFBOEIsT0FFQSxHQUFBLE9BQUFGLFFBQUExQyxJQUFBMEMsRUFDQSxJQUFBdEIsS0FBQXNCLEVBQ0FBLEVBQUFmLGVBQUFQLEtBQ0F1QixFQUFBQSxFQUFBRSxRQUFBLEtBQUF6QixFQUFBLEtBQUFzQixFQUFBdEIsS0FLQSxPQUFBdUIsRUE4QkFHLENBQUFiLEdBQ0FoQyxFQUFBTSxFQUFBSyxTQUFBZ0MsS0FBQUgsS0FDQU0sS0FBQSxTQUFBQyxFQUFBQyxHQUNBaEQsRUFBQU0sRUFBQUssU0FBQWdCLEtBQUEsd0RBQUFxQixPQTdCQUMsR0FDQTVCLEVBQUE2QixpQkF1REEsT0E3R0FDLEtBaUdBQyxLQUFBLFdBRUFwRCxFQUFBTSxFQUFBSyxTQUFBZ0IsS0FBQSxjQUNBM0IsRUFBQXFELElBQUFuRCxFQUFBQyxVQUFBRCxFQUFBRSxlQUNBLFNBQUE0QixHQXJGQUEsRUFzRkFBLEVBckZBaEMsRUFBQU0sRUFBQUcsV0FBQUEsV0FDQTZDLE9BQUF0QixFQUNBdUIsWUFBQSxJQUNBcEMsS0FBQSxZQUFBLEdBSkEsSUFBQWEsRUF1RkFoQyxFQUFBTSxFQUFBSyxTQUFBZ0IsS0FBQSxNQWRBM0IsRUFBQU0sRUFBQUMsY0FBQSxJQUFBRCxFQUFBRSxvQkFBQWdELE9BQUEsV0FDQXhELEVBQUFNLEVBQUFLLFNBQUFnQixLQUFBLElBQ0FiLE1BR0FkLEVBQUFNLEVBQUFNLE1BQUE2QyxHQUFBLFNBQUFyQyxJQTlGQStCLE1BSkEsQ0FvSEE5RCxPQUFBcUUsT0FBQXBFLE1BQUFDLGFBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB3aW5kb3cuSXByZW8gPSB7fTtcclxuXHJcbiAgICB3aW5kb3cuSXByZW8uZ2V0TmFtZXNwYWNlID0gZnVuY3Rpb24obnMpIHtcclxuICAgICAgICB2YXIgbmFtZXNwYWNlUGFydHMgPSBucy5zcGxpdCgnLicpLFxyXG4gICAgICAgICAgICBuYW1lc3BhY2VQYXJ0LFxyXG4gICAgICAgICAgICBuYW1lc3BhY2UgPSB3aW5kb3csXHJcbiAgICAgICAgICAgIGkgPSAwO1xyXG5cclxuICAgICAgICBmb3IgKGk7IGkgPCBuYW1lc3BhY2VQYXJ0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBuYW1lc3BhY2VQYXJ0ID0gbmFtZXNwYWNlUGFydHNbaV07XHJcbiAgICAgICAgICAgIGlmIChuYW1lc3BhY2VbbmFtZXNwYWNlUGFydF0gPT09IHVuZGVmaW5lZCB8fCBuYW1lc3BhY2VbbmFtZXNwYWNlUGFydF0gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG5hbWVzcGFjZVtuYW1lc3BhY2VQYXJ0XSA9IHt9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5hbWVzcGFjZSA9IG5hbWVzcGFjZVtuYW1lc3BhY2VQYXJ0XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuYW1lc3BhY2U7XHJcbiAgICB9XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigkLCBucykge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0bnMuU3Vid2F5U3RvcFBhZ2VIYW5kbGVyID0gZnVuY3Rpb24oKSB7XHJcblx0ICAgIHZhciBtZSA9IHRoaXMsXHJcblx0ICAgICAgICB1cmxzID0ge1xyXG5cdCAgICAgICAgICAgIGFwaVByZWZpeDogJy9hcGkvc3Vid2F5c3RvcHMnLFxyXG5cdCAgICAgICAgICAgIGdldFN1YndheVN0b3BzOiAnJyxcclxuXHQgICAgICAgICAgICBjYWxjdWxhdGVEaXN0YW5jZTogJy9kaXN0YW5jZSdcclxuXHQgICAgICAgIH0sXHJcblx0XHRcdHNlbGVjdG9ycyA9IHtcclxuXHQgICAgICAgICAgICBvcmlnaW5UZXh0Qm94OiAnI29yaWdpbicsXHJcblx0ICAgICAgICAgICAgZGVzdGluYXRpb25UZXh0Qm94OiAnI2Rlc3RpbmF0aW9uJyxcclxuXHQgICAgICAgICAgICB0eXBlYWhlYWQ6ICcudHlwZWFoZWFkJyxcclxuXHQgICAgICAgICAgICBidXR0b246ICcjY2FsY3VsYXRlLWJ1dHRvbicsXHJcblx0ICAgICAgICAgICAgbWVzc2FnZTogJyNtZXNzYWdlJyxcclxuXHQgICAgICAgICAgICBmb3JtOiAnI2Zvcm0nLFxyXG5cdCAgICAgICAgICAgIHJlc3BvbnNlVGVtcGxhdGU6ICcjcmVzcG9uc2UtdGVtcGxhdGUnXHJcblx0XHRcdH07XHJcblxyXG5cdFx0ZnVuY3Rpb24gaW5pdFR5cGVhaGVhZHMoZGF0YSkge1xyXG5cdFx0XHQkKHNlbGVjdG9ycy50eXBlYWhlYWQpLnR5cGVhaGVhZCh7XHJcblx0XHRcdFx0c291cmNlOiBkYXRhLFxyXG5cdFx0XHQgICAgYXV0b1NlbGVjdDogdHJ1ZVxyXG5cdFx0ICAgIH0pLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXQoKSB7XHJcblx0XHQgICAgdmFyIG9yaWdpblZhbCA9ICQoc2VsZWN0b3JzLm9yaWdpblRleHRCb3gpLnZhbCgpLFxyXG5cdFx0ICAgICAgICBkZXN0aW5hdGlvblZhbCA9ICQoc2VsZWN0b3JzLmRlc3RpbmF0aW9uVGV4dEJveCkudmFsKCksXHJcblx0XHQgICAgXHRjYWxjdWxhdGVCdXR0b249ICQoc2VsZWN0b3JzLmJ1dHRvbik7XHJcblxyXG5cdFx0XHRpZiAob3JpZ2luVmFsICYmIGRlc3RpbmF0aW9uVmFsKSB7XHJcblx0XHRcdFx0Y2FsY3VsYXRlQnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG5cdFx0XHQgICAgcmV0dXJuIHRydWU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Y2FsY3VsYXRlQnV0dG9uLnByb3AoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcblx0XHRcdCAgICByZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiBhcHBseU1vZGVsVG9UZW1wbGF0ZShtb2RlbCkge1xyXG5cdFx0ICAgIHZhciBwcm9wLFxyXG5cdFx0ICAgICAgICB0ZW1wbGF0ZVZhbHVlID0gJChzZWxlY3RvcnMucmVzcG9uc2VUZW1wbGF0ZSkuaHRtbCgpO1xyXG5cclxuXHRcdCAgICBpZiAobW9kZWwgIT09IG51bGwgJiYgbW9kZWwgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0ICAgICAgICBmb3IgKHByb3AgaW4gbW9kZWwpIHtcclxuXHRcdCAgICAgICAgICAgIGlmIChtb2RlbC5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xyXG5cdFx0ICAgICAgICAgICAgICAgIHRlbXBsYXRlVmFsdWUgPSB0ZW1wbGF0ZVZhbHVlLnJlcGxhY2UoJ3t7JyArIHByb3AgKyAnfX0nLCBtb2RlbFtwcm9wXSk7XHJcblx0XHQgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIHJldHVybiB0ZW1wbGF0ZVZhbHVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIGZvcm1TdWJtaXRIYW5kbGVyKGV2ZW50KSB7XHJcblx0XHQgICAgcmVxdWVzdERpc3RhbmNlKCk7XHJcblx0XHQgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiByZXF1ZXN0RGlzdGFuY2UoKSB7XHJcblx0XHRcdHZhciBvcmlnaW4gPSAkKHNlbGVjdG9ycy5vcmlnaW5UZXh0Qm94KSxcclxuXHRcdCAgICAgICAgZGVzdGluYXRpb24gPSAkKHNlbGVjdG9ycy5kZXN0aW5hdGlvblRleHRCb3gpLFxyXG5cdFx0ICAgICAgICBhY3RpdmVPcmlnaW4sXHJcblx0XHQgICAgICAgIGFjdGl2ZURlc3RpbmF0aW9uO1xyXG5cclxuXHRcdCAgICBpZiAodmFsaWRhdGVJbnB1dCgpKSB7XHJcblx0XHQgICAgICAgIGFjdGl2ZU9yaWdpbiA9IG9yaWdpbi50eXBlYWhlYWQoJ2dldEFjdGl2ZScpO1xyXG5cdFx0ICAgICAgICBhY3RpdmVEZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uLnR5cGVhaGVhZCgnZ2V0QWN0aXZlJyk7XHJcblxyXG5cdFx0ICAgICAgICBpZiAoYWN0aXZlT3JpZ2luLmhhc093blByb3BlcnR5KCdpZCcpICYmIGFjdGl2ZURlc3RpbmF0aW9uLmhhc093blByb3BlcnR5KCdpZCcpKSB7XHJcblx0XHQgICAgICAgICAgICAkKHNlbGVjdG9ycy5tZXNzYWdlKS50ZXh0KCdsb2FkaW5nLi4uJyk7XHJcblx0XHQgICAgICAgICAgICAkLmFqYXgoe1xyXG5cdFx0ICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG5cdFx0ICAgICAgICAgICAgICAgIHVybDogdXJscy5hcGlQcmVmaXggKyB1cmxzLmNhbGN1bGF0ZURpc3RhbmNlLFxyXG5cdFx0ICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcblx0XHQgICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgICBvcmlnaW5TdWJ3YXlTdG9wSWQ6IGFjdGl2ZU9yaWdpbi5pZCxcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25TdWJ3YXlTdG9wSWQ6IGFjdGl2ZURlc3RpbmF0aW9uLmlkXHJcblx0XHQgICAgICAgICAgICAgICAgfSksXHJcblx0XHQgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG5cdFx0ICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0ICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IGFwcGx5TW9kZWxUb1RlbXBsYXRlKGRhdGEpO1xyXG5cdFx0ICAgICAgICAgICAgICAgICQoc2VsZWN0b3JzLm1lc3NhZ2UpLmh0bWwodGVtcGxhdGUpO1xyXG5cdFx0ICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbiAoeGhyLCBlcnJvcikge1xyXG5cdFx0ICAgICAgICAgICAgICAgICQoc2VsZWN0b3JzLm1lc3NhZ2UpLnRleHQoXCJBbiBlcnJvciBvY2N1cnJlZCByZXF1ZXN0aW5nIHRoZSBpbmZvcm1hdGlvbi4gRXJyb3I6IFwiICsgZXJyb3IpO1xyXG5cdFx0ICAgICAgICAgICAgfSk7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICB9XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gYXR0YWNoSGFuZGxlcnMoKSB7XHJcblx0XHQgICAgJChzZWxlY3RvcnMub3JpZ2luVGV4dEJveCArICcsJyArIHNlbGVjdG9ycy5kZXN0aW5hdGlvblRleHRCb3gpLmNoYW5nZShmdW5jdGlvbigpIHtcclxuXHRcdCAgICBcdCQoc2VsZWN0b3JzLm1lc3NhZ2UpLnRleHQoJycpO1xyXG5cdFx0ICAgICAgICB2YWxpZGF0ZUlucHV0KCk7XHJcblx0XHQgICAgfSk7XHJcblxyXG5cdFx0ICAgICQoc2VsZWN0b3JzLmZvcm0pLm9uKCdzdWJtaXQnLCBmb3JtU3VibWl0SGFuZGxlcik7XHJcblx0XHR9XHJcblxyXG5cdFx0bWUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0Ly8gaW5pdCB0eXBlYWhlYWRzXHJcblx0XHQgICAgJChzZWxlY3RvcnMubWVzc2FnZSkudGV4dCgnbG9hZGluZy4uLicpO1xyXG5cdCAgICAgICAgJC5nZXQodXJscy5hcGlQcmVmaXggKyB1cmxzLmdldFN1YndheVN0b3BzLFxyXG5cdCAgICAgICAgICAgIGZ1bmN0aW9uKGRhdGEpIHtcclxuXHQgICAgICAgICAgICBcdGluaXRUeXBlYWhlYWRzKGRhdGEpO1xyXG5cdCAgICAgICAgICAgICAgICAkKHNlbGVjdG9ycy5tZXNzYWdlKS50ZXh0KCcnKTtcclxuXHQgICAgICAgICAgICB9KTtcclxuXHJcblx0ICAgICAgICBhdHRhY2hIYW5kbGVycygpO1xyXG5cdCAgICB9O1xyXG5cclxuXHQgICAgcmV0dXJuIG1lO1xyXG5cdH1cclxuXHJcbn0pKHdpbmRvdy5qUXVlcnksIElwcmVvLmdldE5hbWVzcGFjZSgnSXByZW8uUGFnZUhhbmRsZXJzJykpOyJdfQ==
